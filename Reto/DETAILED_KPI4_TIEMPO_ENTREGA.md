# Gu√≠a Detallada: KPI 4 - Tiempo de Entrega Promedio
## Paso a Paso Completo con Instrucciones Espec√≠ficas

---

## üéØ OBJETIVO DEL KPI

Analizar tiempos de entrega para:
- Identificar transportistas m√°s r√°pidos y confiables
- Detectar regiones con problemas de entrega
- Optimizar log√≠stica y mejorar satisfacci√≥n del cliente

---

## üìã QU√â VAMOS A CREAR

Crearemos **3 visualizaciones**:

1. **Sheet 4A**: Box Plot - Distribuci√≥n de tiempos por transportista
2. **Sheet 4B**: Line Chart - Tendencia de tiempos en el tiempo
3. **Sheet 4C**: Heat Map - Tiempos por estado y transportista

---

## üöÄ PREPARACI√ìN: Campos Calculados Necesarios

Antes de empezar, aseg√∫rate de tener estos campos calculados creados:

### **1. D√≠as para Entrega** (Ya deber√≠as tenerlo)
```
DATEDIFF('day', [FechaCamino], [FechaEntrega])
```

### **2. D√≠as H√°biles para Entrega** (Opcional, mejora)
```
// Semanas completas * 5 d√≠as h√°biles
INT([D√≠as para Entrega] / 7) * 5

// M√°s d√≠as restantes (m√°ximo 5)
+ MIN([D√≠as para Entrega] % 7, 5)

// Ajuste si empieza en fin de semana
- CASE DATEPART('weekday', [FechaCamino])
    WHEN 1 THEN 1  // Domingo
    WHEN 7 THEN 1  // S√°bado
    ELSE 0
  END
```

### **3. Categor√≠a de Entrega** (Opcional, para an√°lisis)
```
IF [D√≠as para Entrega] = 0 THEN 'Mismo D√≠a'
ELSEIF [D√≠as para Entrega] = 1 THEN '1 D√≠a'
ELSEIF [D√≠as para Entrega] <= 3 THEN '2-3 D√≠as'
ELSEIF [D√≠as para Entrega] <= 5 THEN '4-5 D√≠as'
ELSE '6+ D√≠as'
END
```

‚úÖ **Ahora s√≠, comencemos con las visualizaciones!**

---

# üìä SHEET 4A: BOX PLOT - Tiempos de Entrega

## üéØ Qu√© Muestra

Un **Box Plot** (diagrama de caja) muestra la distribuci√≥n de tiempos de entrega para cada transportista:
- La caja = 50% del medio de los datos
- La l√≠nea en la caja = Mediana
- Los bigotes = Rango completo
- Puntos = Valores at√≠picos (outliers)

---

## üìù PASO A PASO

### **PASO 1: Crear Nueva Hoja**

1. **Mira en la parte inferior de tu pantalla** donde est√°n las pesta√±as de sheets

2. **Busca un √≠cono o espacio vac√≠o** al lado de tu √∫ltima sheet

3. **Opciones para crear nueva sheet**:
   - **Opci√≥n A**: Click en el icono **"+"** o **"New Worksheet"**
   - **Opci√≥n B**: Click derecho en espacio vac√≠o ‚Üí "New Worksheet"
   - **Opci√≥n C**: Men√∫: Worksheet ‚Üí New Worksheet

4. **Se crea una nueva sheet en blanco**

5. **Renombrar la sheet**:
   - **Double-click** en la pesta√±a (donde dice "Sheet X")
   - **Escribe**: `4A_Tiempos_Entrega_BoxPlot`
   - **Press Enter**

‚úÖ **Resultado**: Tienes una hoja nueva llamada "4A_Tiempos_Entrega_BoxPlot"

---

### **PASO 2: Agregar Transportista a Columns**

1. **Busca "Transportista"** en el Data pane (panel izquierdo)
   - Est√° en la secci√≥n de Dimensions o dentro de tu tabla "Ventas"

2. **Click y MANT√âN presionado** el bot√≥n del mouse sobre "Transportista"

3. **Arrastra** hacia el √°rea superior que dice **"Columns"**
   - Es una barra horizontal cerca del top de tu workspace
   - Dice "Drop field here" cuando est√° vac√≠a

4. **Suelta el bot√≥n del mouse**

‚úÖ **Resultado**: 
- En Columns shelf aparece una p√≠ldora AZUL que dice: `Transportista`
- En tu vista ves columnas con nombres de transportistas (99minutos, DHL, FedEx, Mercado Envios, Paquetexpress)

---

### **PASO 3: Agregar D√≠as para Entrega a Rows**

1. **Busca "D√≠as para Entrega"** en Data pane
   - Deber√≠a estar en Measures (tiene s√≠mbolo #)
   - Si no lo ves, b√∫scalo en calculated fields

2. **Arrastra "D√≠as para Entrega"** hacia **"Rows"**
   - Es la barra vertical en el lado izquierdo del workspace
   - Dice "Drop field here" cuando est√° vac√≠a

3. **Su√©ltalo**

‚úÖ **Resultado**:
- En Rows aparece una p√≠ldora VERDE: `SUM(D√≠as para Entrega)`
- En tu vista ves barras verticales (por ahora, es normal)

---

### **PASO 4: Convertir a Box Plot usando Show Me**

Ahora viene la parte importante - cambiar a Box Plot:

#### **A. Abrir Show Me**

1. **Busca "Show Me"** en la esquina superior derecha de tu pantalla
   - Es un panel que puede estar colapsado o expandido
   - Tiene un √≠cono de diferentes tipos de gr√°ficas

2. **Si est√° colapsado** (solo ves el t√≠tulo):
   - **Click en "Show Me"** para expandir el panel

3. **Si est√° expandido**: 
   - Ver√°s una cuadr√≠cula con ~20 tipos diferentes de visualizaciones

#### **B. Seleccionar Box-and-Whisker Plot**

4. **Busca el √≠cono del Box Plot** en la cuadr√≠cula de Show Me
   - Se parece a esto: `‚îÄ‚î§‚ñ°‚ñ°‚ñ°‚îú‚îÄ` (una caja con l√≠neas a los lados)
   - Nombre: "box-and-whisker plots" o "box plots"
   - Generalmente est√° en la fila 3-4 de la cuadr√≠cula

5. **Click UNA VEZ** en ese √≠cono

6. **Tableau autom√°ticamente transforma tu visualizaci√≥n**

‚úÖ **Resultado**: ¬°Ahora tienes Box Plots! Uno por cada transportista mostrando la distribuci√≥n de tiempos de entrega.

---

### **PASO 5: Entender Tu Box Plot**

Antes de formatear, veamos qu√© muestra:

```
Transportista 1:
                 ‚óè  (outlier - entrega muy tard√≠a)
          ‚ï∑
    ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§      (Q3 - 75% de entregas por debajo)
    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚îÇ      (Caja - rango intercuartil)
    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚îº‚îÄ‚îÄ    (Mediana - l√≠nea en medio de la caja)
    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚îÇ
    ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§      (Q1 - 25% de entregas por debajo)
          ‚ïµ
     ‚óè            (outlier - entrega muy r√°pida)
```

**Elementos**:
- **Caja (rect√°ngulo)**: Contiene el 50% central de los datos
- **L√≠nea en la caja**: Mediana (50% de entregas est√°n por debajo/encima)
- **Bigotes (whiskers)**: L√≠neas que se extienden hacia min/max
- **Puntos individuales**: Outliers (valores extremos)

---

### **PASO 6: Colorear por Transportista**

Vamos a dar color a cada transportista para distinguirlos mejor:

1. **Busca "Transportista"** en Data pane

2. **Arr√°stralo hacia el Marks Card** (panel izquierdo, debajo de Filters)

3. **Su√©ltalo espec√≠ficamente en "Color"**
   - Ver√°s un bot√≥n/√°rea que dice "Color" con un √≠cono de paleta

‚úÖ **Resultado**: Cada transportista ahora tiene su propio color

#### **Opcional: Ajustar Colores**

4. **Click en "Color"** en el Marks Card

5. **Se abre un men√∫ desplegable**

6. **Click en "Edit Colors..."**

7. **Selecciona una paleta**:
   - Recomendado: "Tableau 10" o "Color Blind"
   - Puedes asignar colores espec√≠ficos a cada transportista

8. **Click OK**

---

### **PASO 7: Agregar L√≠nea de Referencia (Promedio General)**

Ahora vamos a agregar una l√≠nea horizontal que muestre el promedio de todos los transportistas:

#### **A. Abrir Panel de Analytics**

1. **Mira en el panel izquierdo**, arriba del Data pane

2. **Ver√°s dos pesta√±as**:
   ```
   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
   ‚îÇ   Data   ‚îÇ Analytics ‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
   ```

3. **Click en la pesta√±a "Analytics"**

‚úÖ **El panel cambia y muestra opciones como**:
- Summarize (Constant Line, Average Line, Median Line, etc.)
- Model
- Custom

#### **B. Agregar Average Line**

4. **Busca la secci√≥n "Summarize"** (primera secci√≥n)

5. **Busca "Average Line"** en esa secci√≥n

6. **Click en "Average Line" y MANT√âN presionado**

7. **Arrastra hacia tu gr√°fica** (la visualizaci√≥n con los box plots)

8. **Cuando est√©s sobre la gr√°fica, aparecen opciones**:
   ```
   Table    Cell    Pane
   ```

9. **Suelta sobre "Pane"** (opci√≥n del medio)

‚úÖ **Aparece una ventana: "Edit Reference Line, Band, or Box"**

#### **C. Configurar la Reference Line**

10. **En la ventana que se abri√≥, configura**:

**Secci√≥n "Line"**:
- **Value**: Aseg√∫rate que diga **"Average"** (promedio)
  - Dropdown deber√≠a mostrar opciones como Average, Median, Constant, etc.
  - Selecciona: **Average**

- **Label**: Controla qu√© texto muestra la l√≠nea
  - Dropdown con opciones: None, Value, Computation, Custom
  - Selecciona: **"Value"** o **"Computation"**
  - O escribe custom: `Promedio General: <Value> d√≠as`

**Secci√≥n "Formatting"**:

- **Line**: Define el estilo de la l√≠nea
  - Click en el dropdown que muestra el estilo de l√≠nea
  - Opciones: S√≥lida (‚îÄ‚îÄ‚îÄ‚îÄ), Punteada (¬∑¬∑¬∑¬∑), Rayada (----), etc.
  - **Selecciona**: L√≠nea punteada o rayada

- **Color de l√≠nea**:
  - Click en el cuadrito de color al lado
  - **Selecciona**: Rojo (#d62728 o cualquier rojo)

- **Fill**: Define relleno (√°rea sombreada)
  - **D√©jalo en**: "None" (no queremos √°rea, solo l√≠nea)

11. **Click "OK"**

‚úÖ **Resultado**: Una l√≠nea horizontal roja punteada cruza todo el gr√°fico mostrando el promedio general de d√≠as de entrega

---

### **PASO 8: Agregar Etiquetas de Mediana**

Opcional pero √∫til - mostrar el valor de la mediana en cada box:

1. **Click en "Label"** en el Marks Card

2. **Se abre un men√∫ de configuraci√≥n**

3. **Marca la casilla**: "Show mark labels"

4. **En la secci√≥n "Marks to Label"**:
   - Puedes ajustar a solo mostrar min/max/median
   - O dejar en "Automatic"

5. **Ajusta el font**:
   - Font: Tableau Book o similar
   - Size: 9 o 10
   - Alignment: Center

6. **Click fuera del men√∫** para cerrar

‚úÖ **Resultado**: Ves valores num√©ricos en o cerca de los box plots

---

### **PASO 9: Formatear el Tooltip (Hover Information)**

Cuando pases el mouse sobre los box plots, aparece informaci√≥n. Vamos a mejorarla:

1. **Click en "Tooltip"** en el Marks Card

2. **Se abre un editor de texto**

3. **Borra el contenido existente** (Ctrl+A, Delete)

4. **Copia y pega este contenido**:

```
üöö <ATTR(Transportista)>

‚è±Ô∏è TIEMPOS DE ENTREGA
Promedio: <AVG(D√≠as para Entrega)> d√≠as
Mediana: <MEDIAN(D√≠as para Entrega)> d√≠as
M√≠nimo: <MIN(D√≠as para Entrega)> d√≠as
M√°ximo: <MAX(D√≠as para Entrega)> d√≠as

üìä VOLUMEN
Entregas: <COUNTD(IDVenta)>
```

**IMPORTANTE**: Para agregar los campos correctamente:

- **NO escribas** `<AVG(D√≠as para Entrega)>` manualmente
- En lugar de eso:
  - Posiciona el cursor donde quieres el valor
  - Click en **"Insert"** (esquina superior derecha del editor)
  - Selecciona el campo apropiado de la lista
  - Tableau lo inserta como `<AGG(campo)>`

5. **Click "OK"**

‚úÖ **Resultado**: Tooltips informativos con emojis y estructura clara

---

### **PASO 10: Formatear Ejes**

#### **A. Formato del Eje Y (D√≠as para Entrega)**

1. **Right-click en el eje Y** (lado izquierdo donde est√°n los n√∫meros)

2. **Select "Format..."**

3. **Se abre un panel de Format a la izquierda**

4. **En la secci√≥n "Axis"**:
   - **Title**: Puedes cambiar el t√≠tulo del eje
     - Doble-click ‚Üí Escribe: "D√≠as de Entrega"
   
5. **En la secci√≥n "Scale"** (pesta√±as abajo):
   - **Numbers**: Formato de n√∫meros
     - Selecciona: "Number (Standard)"
     - Decimales: 0

6. **Cerrar el panel de Format**

#### **B. Formato del Eje X (Transportistas)**

1. **Right-click en el eje X** (abajo donde est√°n los nombres)

2. **Select "Format..."**

3. **Ajustar**:
   - Font size: 10-11
   - Alignment: Horizontal (si los nombres son largos, puedes rotarlos)
   - Para rotar: Click en eje ‚Üí Edit Axis ‚Üí Tick Marks ‚Üí "Rotated" 45¬∞

‚úÖ **Resultado**: Ejes limpios y legibles

---

### **PASO 11: Agregar Filtros (Opcional)**

Para an√°lisis m√°s espec√≠fico:

#### **Filtro de Fecha (Nov-Dic)**

1. **Drag "Filtro NovDic"** (o tu campo de filtro de fechas) a Filters shelf

2. **Select "True"**

3. **Click OK**

#### **Filtro de Estado (Para explorar regiones)**

1. **Drag "Estado"** a Filters

2. **Select "All"** por ahora (puedes filtrar despu√©s)

3. **Click OK**

4. **Right-click en el filtro** ‚Üí **"Show Filter"**
   - Aparece un selector a la derecha de tu visualizaci√≥n

‚úÖ **Resultado**: Puedes filtrar por fechas y regiones din√°micamente

---

### **PASO 12: Ajustes Finales de Dise√±o**

#### **A. T√≠tulo de la Sheet**

1. **Double-click donde dice el nombre de la sheet** (parte superior del workspace)
   - Generalmente dice "Sheet Name"

2. **Escribe un t√≠tulo descriptivo**:
```
Distribuci√≥n de Tiempos de Entrega por Transportista
```

3. **Formatear el t√≠tulo**:
   - Selecciona el texto
   - Worksheet ‚Üí Show Title (si no est√° visible)
   - Right-click en el t√≠tulo ‚Üí Format Title
   - Font: Bold, Size 14-16

#### **B. Ajustar Tama√±o de Vista**

1. **Mira en la toolbar superior**

2. **Busca iconos de ajuste de vista**:
   - "Fit Width" (ajustar al ancho)
   - "Fit Entire View" (ajustar toda la vista)
   - "Standard" (tama√±o est√°ndar)

3. **Prueba "Fit Entire View"** para ver todo el gr√°fico sin scroll

---

## ‚úÖ CHECKLIST - SHEET 4A COMPLETA

Marca cuando completes cada elemento:

- [ ] Sheet creada y nombrada "4A_Tiempos_Entrega_BoxPlot"
- [ ] Transportista en Columns
- [ ] D√≠as para Entrega en Rows
- [ ] Convertido a Box Plot (usando Show Me)
- [ ] Coloreado por Transportista
- [ ] L√≠nea de referencia de promedio (roja, punteada)
- [ ] Etiquetas de mediana (opcional)
- [ ] Tooltip formateado
- [ ] Ejes formateados
- [ ] Filtros aplicados (Nov-Dic)
- [ ] T√≠tulo claro y descriptivo

---

# üìà SHEET 4B: LINE CHART - Tendencia de Tiempos

## üéØ Qu√© Muestra

Una gr√°fica de l√≠nea que muestra c√≥mo var√≠an los tiempos promedio de entrega a lo largo del tiempo, con barras de volumen.

---

## üìù PASO A PASO

### **PASO 1: Crear Nueva Hoja**

1. **Click en el √≠cono "New Worksheet"** (o bot√≥n +)

2. **Renombrar**: `4B_Tendencia_TiemposEntrega`

---

### **PASO 2: Agregar FechaEntrega a Columns**

1. **Busca "FechaEntrega"** en Data pane
   - Es un campo de tipo Date (tiene √≠cono de calendario)

2. **Drag "FechaEntrega"** hacia **Columns**

3. **Tableau autom√°ticamente lo pone como YEAR(FechaEntrega)**

4. **Necesitamos cambiarlo a d√≠a continuo**:
   - **Click en el dropdown** de la p√≠ldora en Columns
   - **Select**: "Day" 
   - **Aseg√∫rate que sea CONTINUA (verde)**, no discreta (azul)
   
   **Visual**: Deber√≠as ver `DAY(FechaEntrega)` en p√≠ldora VERDE

---

### **PASO 3: Agregar Promedio de D√≠as a Rows**

1. **Drag "D√≠as para Entrega"** hacia **Rows**

2. **Aparece como**: `SUM(D√≠as para Entrega)`

3. **Cambiar a Promedio**:
   - **Click en el dropdown** de la p√≠ldora en Rows
   - **Select**: "Measure (Sum)" ‚Üí Cambiar a **"Average"**
   - Ahora dice: `AVG(D√≠as para Entrega)`

‚úÖ **Resultado**: Una l√≠nea mostrando el promedio diario de d√≠as de entrega

---

### **PASO 4: Crear Dual-Axis con Volumen (Barras)**

Ahora vamos a agregar barras que muestren cu√°ntas entregas hubo cada d√≠a:

1. **Drag "IDVenta"** (o cualquier campo √∫nico) hacia **Rows**
   - Lo sueltas AL LADO de `AVG(D√≠as para Entrega)` en Rows
   - NO reemplaces, sino que agrega una segunda m√©trica

2. **Aparece**: `COUNTD(IDVenta)` en Rows (cuenta entregas)

3. **Crear dual-axis**:
   - **Right-click en `COUNTD(IDVenta)`** en Rows (el segundo)
   - **Select "Dual Axis"**

4. **Los dos ejes se fusionan** - ahora ves l√≠nea + barras superpuestas

---

### **PASO 5: Formatear las Dos Capas**

Ahora tienes DOS Marks Cards (uno para cada m√©trica). Vamos a formatearlas:

#### **A. Marks Card de AVG(D√≠as para Entrega) - L√çNEA**

1. **Encuentra el Marks Card que dice**: `AVG(D√≠as para Entrega)`

2. **Cambiar tipo a Line**:
   - Click en el dropdown (dice "Automatic" o tiene un √≠cono)
   - Select: **"Line"**

3. **Cambiar color**:
   - Click en "Color"
   - Select: Azul oscuro (#1f77b4)

4. **Cambiar grosor**:
   - Click en "Size"
   - Arrastrar slider hacia la derecha (l√≠nea m√°s gruesa)

#### **B. Marks Card de COUNTD(IDVenta) - BARRAS**

5. **Encuentra el Marks Card que dice**: `COUNTD(IDVenta)`

6. **Cambiar tipo a Bar**:
   - Dropdown ‚Üí Select: **"Bar"**

7. **Cambiar color a gris claro con transparencia**:
   - Click en "Color"
   - Select: Gris claro (#cccccc)
   - **Ajustar Opacity**: Slider a 40% (para ver la l√≠nea detr√°s)

---

### **PASO 6: Desincronizar Ejes** (Importante)

Los dos ejes tienen escalas diferentes (d√≠as vs cantidad). NO queremos sincronizarlos:

1. **Right-click en el eje derecho** (donde est√° COUNTD(IDVenta))

2. **Busca "Synchronize Axis"** en el men√∫

3. **Aseg√∫rate que NO est√© marcado** (sin checkmark)
   - Si est√° marcado, click para desmarcarlo

‚úÖ **Resultado**: Cada eje mantiene su propia escala

---

### **PASO 7: Agregar Bandas de Objetivo** (Zonas Verde/Amarillo/Rojo)

Vamos a sombrear el fondo seg√∫n objetivos de tiempo:

#### **Banda Verde: 1-3 d√≠as (Excelente)**

1. **Tab Analytics** ‚Üí Drag "Reference Band"

2. **Drop en "Pane"**

3. **Configure**:
   - **Band From**: Constant ‚Üí Escribe **1**
   - **Band To**: Constant ‚Üí Escribe **3**
   - **Label**: "Excelente (1-3 d√≠as)"
   - **Formatting**:
     - Fill Above: None
     - Fill: Green (#d4edda) con 30% opacity
     - Fill Below: None
     - Border: None

4. **Click OK**

#### **Banda Amarilla: 4-5 d√≠as (Aceptable)**

5. **Drag otra "Reference Band"**

6. **Configure**:
   - **Band From**: Constant ‚Üí **3**
   - **Band To**: Constant ‚Üí **5**
   - **Fill**: Yellow (#fff3cd) con 30% opacity

#### **Banda Roja: 5+ d√≠as (Mejorar)**

7. **Drag otra "Reference Band"**

8. **Configure**:
   - **Band From**: Constant ‚Üí **5**
   - **Band To**: Constant ‚Üí **10** (o el m√°ximo que veas)
   - **Fill**: Red (#f8d7da) con 30% opacity

‚úÖ **Resultado**: El fondo muestra zonas de rendimiento

---

### **PASO 8: Filtros y Formato Final**

1. **Agregar filtro Nov-Dic**:
   - Drag "Filtro NovDic" a Filters ‚Üí Select True

2. **Formatear tooltips** para cada capa (AVG y COUNTD)

3. **T√≠tulo**: "Evoluci√≥n de Tiempos de Entrega Promedio"

---

## ‚úÖ CHECKLIST - SHEET 4B COMPLETA

- [ ] Sheet nombrada "4B_Tendencia_TiemposEntrega"
- [ ] FechaEntrega en Columns (d√≠a continuo, verde)
- [ ] AVG(D√≠as para Entrega) como l√≠nea azul
- [ ] COUNTD(IDVenta) como barras grises transparentes
- [ ] Dual-axis configurado (ejes desincronizados)
- [ ] Bandas de objetivo (verde/amarillo/rojo)
- [ ] Filtro Nov-Dic aplicado
- [ ] Tooltips formateados

---

# üî• SHEET 4C: HEAT MAP - Estado √ó Transportista

## üéØ Qu√© Muestra

Un mapa de calor que muestra qu√© transportista es m√°s r√°pido en cada estado.

---

## üìù PASO A PASO

### **PASO 1: Crear Nueva Hoja**

1. **New Worksheet** ‚Üí Nombrar: `4C_HeatMap_Estado_Transportista`

---

### **PASO 2: Estructura B√°sica**

1. **Columns**: Drag **"Transportista"**

2. **Rows**: Drag **"Estado"**

3. **Color**: Drag **"D√≠as para Entrega"**
   - Click en el dropdown de la p√≠ldora ‚Üí Select **"Average"**
   - Ahora dice: `AVG(D√≠as para Entrega)`

‚úÖ **Resultado**: Una tabla con colores

---

### **PASO 3: Cambiar a Squares (Heat Map)**

1. **Marks Card**: Cambiar dropdown a **"Square"**

‚úÖ **Resultado**: Cuadrados de colores en lugar de texto

---

### **PASO 4: Configurar Paleta de Colores Divergente**

1. **Click en "Color"** en Marks Card

2. **Click "Edit Colors..."**

3. **Select Palette**: "Red-Yellow-Green (Diverging)"

4. **Configure**:
   - **Stepped Color**: Marcar checkbox
   - **Steps**: 5
   - **Center**: Escribe **3** (el objetivo de d√≠as)
   - **Start**: Rojo (lento)
   - **Center**: Amarillo (normal)
   - **End**: Verde (r√°pido)

5. **Reversed**: Marca si es necesario para que verde = r√°pido

6. **Click OK**

‚úÖ **Resultado**: 
- Verde = Entregas r√°pidas (0-2 d√≠as)
- Amarillo = Entregas normales (2-4 d√≠as)
- Rojo = Entregas lentas (4+ d√≠as)

---

### **PASO 5: Filtrar Estados Principales**

Solo queremos ver estados con suficientes datos:

#### **M√©todo A: Filtro Manual Top 15**

1. **Drag "Estado"** a Filters

2. **Select Top tab**

3. **By field: Top 15**

4. **By: Total (MXN)** o **COUNTD(IDVenta)**

5. **Click OK**

#### **M√©todo B: Filtro con C√°lculo**

1. **Create Calculated Field**: `Estado Con Datos Suficientes`

```
{FIXED [Estado]: COUNTD([IDVenta])} >= 20
```

2. **Drag a Filters** ‚Üí Select "True"

---

### **PASO 6: Agregar Etiquetas con Valores**

1. **Drag "D√≠as para Entrega"** a **Label** en Marks Card

2. **Aseg√∫rate que sea AVG** (promedio)

3. **Format labels**:
   - Click en "Label"
   - Font: Bold, Size 10
   - Alignment: Center, Middle
   - Format numbers: Decimal, 1 place ‚Üí mostrar√° "2.5" por ejemplo

4. **Opcional**: Agregar texto
   - En el editor de Label, escribe: `<AVG(D√≠as para Entrega)> d`
   - Esto muestra: "2.5 d"

---

### **PASO 7: Ajustar Tama√±o y Bordes**

1. **Size**: Ajusta para que los cuadrados sean del mismo tama√±o

2. **Click "Color"** ‚Üí **Border**: 
   - Color: Blanco
   - Width: Medium

‚úÖ **Resultado**: Heat map limpio con bordes blancos

---

### **PASO 8: Tooltip Enriquecido**

```
üìç <Estado>
üöö <Transportista>

‚è±Ô∏è Tiempo Promedio: <AVG(D√≠as para Entrega)> d√≠as
üì¶ Entregas Realizadas: <COUNTD(IDVenta)>

üí∞ Costo Promedio Env√≠o: $<AVG(Costos de env√≠o)> MXN
```

---

## ‚úÖ CHECKLIST - SHEET 4C COMPLETA

- [ ] Sheet nombrada "4C_HeatMap_Estado_Transportista"
- [ ] Transportista en Columns
- [ ] Estado en Rows (Top 15 o filtrado)
- [ ] AVG(D√≠as para Entrega) en Color
- [ ] Mark type: Square
- [ ] Color palette: Red-Yellow-Green divergente (center en 3)
- [ ] Labels mostrando valores (X.X d)
- [ ] Borders blancos
- [ ] Tooltip formateado
- [ ] Filtro Nov-Dic aplicado

---

# üé® CONSEJOS DE DISE√ëO FINAL

## Consistencia de Colores

Para las 3 sheets, mant√©n consistencia:

**Transportistas** (√∫salos en todas las sheets):
- 99minutos: Naranja
- DHL: Rojo
- FedEx: Morado
- Mercado Envios: Azul
- Paquetexpress: Verde

**Zonas de Tiempo**:
- 0-3 d√≠as: Verde (excelente)
- 3-5 d√≠as: Amarillo (aceptable)
- 5+ d√≠as: Rojo (mejorar)

---

## Formato de N√∫meros

En todas las sheets, aseg√∫rate que:
- D√≠as de entrega: 1 decimal (2.5 d√≠as)
- Costos: Currency sin decimales ($150 MXN)
- Cantidades: Number sin decimales (45 entregas)

---

# üö® TROUBLESHOOTING COM√öN

## ‚ùå "El Box Plot no se crea / Show Me est√° gris"

**Causa**: Tableau necesita datos desagregados para Box Plot

**Soluci√≥n**:
1. Ve a Analysis ‚Üí Aggregate Measures ‚Üí Desmarcar
2. O arrastra "D√≠as para Entrega" a Detail en Marks Card
3. Aseg√∫rate de tener una dimensi√≥n (Transportista) y una medida

---

## ‚ùå "El heat map est√° vac√≠o / todas las celdas son iguales"

**Causa**: No hay suficientes datos o filtro muy restrictivo

**Soluci√≥n**:
1. Verifica filtros - temporalmente qu√≠talos todos
2. Aseg√∫rate que hay datos en esa combinaci√≥n Estado-Transportista
3. Reduce el m√≠nimo de entregas requeridas (de 20 a 5)

---

## ‚ùå "Las bandas de referencia no aparecen en 4B"

**Causa**: Eje autom√°tico ajustando rango

**Soluci√≥n**:
1. Right-click en eje Y ‚Üí Edit Axis
2. Range: Fixed
3. Fixed start: 0
4. Fixed end: 10 (o el m√°ximo que veas en tus datos)
5. Click OK
6. Ahora agrega las bandas de nuevo

---

## ‚ùå "Los colores del heat map est√°n al rev√©s"

**Causa**: Paleta invertida

**Soluci√≥n**:
1. Click en Color ‚Üí Edit Colors
2. Marca o desmarca "Reversed"
3. Aseg√∫rate: Verde = valores bajos (r√°pido), Rojo = valores altos (lento)

---

# ‚ú® ¬°FELICITACIONES!

Has completado las 3 visualizaciones del KPI 4. Ahora tienes:

‚úÖ **Box Plot** - Distribuci√≥n y comparaci√≥n de transportistas
‚úÖ **Line Chart** - Tendencia temporal con zonas de objetivo
‚úÖ **Heat Map** - Performance por estado y transportista

**Estos 3 sheets te dan una vista 360¬∞ de tu log√≠stica de entrega!** üöÄ

---

## üìö SIGUIENTES PASOS

1. **Probar las visualizaciones**:
   - Hover sobre diferentes elementos
   - Usa los filtros
   - Analiza los insights

2. **Documentar insights encontrados**:
   - ¬øQu√© transportista es m√°s r√°pido?
   - ¬øQu√© estados tienen problemas?
   - ¬øMejora o empeora en diciembre?

3. **Prepararse para integrar en dashboard**:
   - Estas 3 sheets se combinar√°n en el dashboard final
   - Ya est√°n listas para usar!

---

**¬øListo para el siguiente KPI (KPI 5: ROI de Publicidad)?** 

¬°O si tienes dudas sobre KPI 4, pregunta! üí™

